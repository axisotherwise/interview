# 데이터베이스
<br>

### 1.데이터베이스 사용 이유
데이터베이스 등장 전 파일 시스템을 통해 데이터를 관리했습니다. <br>
파일 시스템은 데이터에 대한 종속성과 중복성 그리고 무결성의 문제가 발생할 수 있어 데이터베이스를 사용합니다.

<br>

### 2.데이터베이스 특징
1. 실시간 접근성
비정형적인 질의(조회)에 대하여 실시간 처리에 의한 응답이 가능해야합니다.

2. 지속적인 변화
데이터베이스의 상태는 동적입니다. <br> 
새로운 데이터의 삽입, 삭제, 갱신으로 항상 최신 데이터를 유지해야합니다.

3. 동시 공용
데이터베이스는 서로 다른 목적을 가진 여러 응용자들이 사용합니다. <br>
이에따라, 다수의 사용자가 동시에 같은 내용의 데이터를 이용할 수 있어야합니다.

4. 내용에 의한 참조
데이터베이스에 있는 데이터를 참조 시 데이터 레코드의 주소나 위치에 의해서가 아니라 사용자가 요구하는 데이터 내용으로 찾아야합니다.

<br>

### 3. SQL 구조
DDL, DML, DCL 총 3가지로 이루어져있습니다.

- DDL (Data Definition Language) 데이터 정의 언어
데이터베이스의 구조를 정의합니다. <br>
(Create, Drop, Alter, Truncate)

- DML (Data Manipulation Language) 데이터 조작 언어
데이터의 조작을 위해 사용합니다. <br>
(Select, Insert, Update, Delete)

- DCL (Data Controller Language) 데이터 제어 언어
데이터베이스 내 데이터에대한 무결성과 유지 관리를 위해 사용됩니다. <br>
(Grant, Revoke)

<br>

### 4. 이상 현상
이상 현상은 잘못된 테이블 설계로 인해 데이터 삽입, 수정, 삭제 시 발생하는 논리적 오류를 말합니다. <br>

- 삽입 이상: 자료 삽입 시 특정 속성에 해당하는 값이 없어 NULL을 입력해야하는 현상

- 갱신 이상: 중복된 데이터 중 일부만 수정되어 데이터 모순이 일어나는 현상

- 삭제 이상: 어떤 정보를 삭제하면 의도하지 않은 다른 정보까지 삭제되버리는 현상

<br>

### 5. 정규화
하나의 릴레이션(테이블)에 하나의 의미만 존재하도록 릴레이션을 분해하는 과정입니다.
나쁜 릴레이션의 속성들을 나누어 좋고 작은 릴레이션으로 분배합니다.

- 나쁜 릴레이션은 엔티티를 구성하고있는 속성 간에 함수적 종속성으로 판단합니다. 
판단된 함수적 종속성은 좋은 릴레이션 설계의 정형적 기준으로 사용됩니다.

- 정규화는 불필요한 데이터를 제거하고 이상 현상을 방지하기 위한 목적으로 실행합니다. 

<br>

> 장점 <br>
데이터베이스 구조 확장 시 정규화된 데이터베이스는 그 구조를 변경하지 않거나 일부만 수정할 수 있습니다.

> 단점 <br> 
릴레이션의 분해로 릴레이션간의 연산(Join)이 많아져 성능 저하가 발생할 수 있습니다.

<br>

### 6. 비정규화
하나 이상의 릴레이션에 데이터를 중복으로 배치하는 과정입니다.

- 읽기 작업의 성능 문제가 발생한 경우 실행합니다.

- 비정규화를 과도하게 적용할 경우 데이터의 무결성이 조각날 수 있습니다.

<br>

### 7. SQL Injection
서비스에 악의적인 SQL 구문을 삽입하여 데이터베이스를 비정상적으로 조작하는 코드 인젝션 공격 기법입니다.

- 사용자의 입력이 쿼리에 동적으로 영향을 주는 경우 입력된 값이 개발자가 의도한 값인지 검증해야 합니다.

- 사용하고자하는 쿼리에 미리 형식을 지정하는 저장 프로시저를 사용합니다. 지정된 형식의 데이터가 아니면 쿼리가 실행되지 않으므로 보안성이 향상됩니다.

<br>

### 8. 트랜잭션
일련의 작업들을 모두 처리하거나 처리가 안될 경우 실행 이전의 상태로 복구하여 작업의 일부만 적용되는 현상이 발생되지않도록 만들어주는 기능입니다.

- 원자성(Atomicity) <br>
작업이 모두 반영되거나 반영되지 않아야합니다.(All or Nothing)

- 일관성(Consistency) <br>
트랜젹신이 완료되면 언제나 일관성있는 데이터를 유지해아합니다.

- 독립성(Isolation) <br>
둘 이상의 트랜젹션이 실행될 경우 서로의 작업에 끼어들 수 없습니다.

- 지속성(Durability) <br>
트랜잭션이 완료되면 결과는 데이터베이스에 영구적으로 반영되야합니다.

<br>

### 9. 데이터베이스 락(Lock)
트랜잭션 처리의 순차성을 보장하는 방법입니다.

- 공유락(Shared Lock) <br>
공유락은 읽기 작업 시 사용하는 락이며 데이터를 읽기만하므로 같은 공유락끼리 동시 접근이 가능합니다.

- 베타락(Exclusive Lock) <br>
베타락은 데이터 변경 시 사용하는 락이며 트랜잭션 완료 시점까지 유지되며 베타락이 끝나기 전까지 어떠한 접근도 허용하지 않습니다.

<br>

### 10. 정적 쿼리 동적 쿼리
- 정적 쿼리 <br>
어떤 조건 또는 상황에도 변경되지 않는 쿼리입니다.

- 동적 쿼리 <br>
어떤 조건 또는 상황에서 변경되는 쿼리입니다.

<br>

### 11. 조인
2개 이상의 테이블을 결합하는 연산 작업입니다. 데이터의 규모가 커지면서 하나의 테이블로 정보를 수용하기 어려워 테이블을 분할하고 테이블 간의 관계성을 부여합니다.

- Inner Join <br>
서로 연관된 내용만 검색하는 조인 방법입니다. <br>
A와 B에 대해 수행된다면 A와 B의 교집합을 의미합니다.

- Outer Join <br>
한 쪽에는 데이터가 있지만 한 쪽에는 데이터가 없는 경우 데이터가 있는 쪽의 내용을 전부 출력하는 방법입니다. <br>
A와 B에 대해 수행된다면 A와 B의 합집합을 의미합니다. 

<br>

> Left Join <br>
왼쪽 테이블을 기준으로 오른쪽의 테이블을 매치시킵니다. <br>
왼쪽 테이블의 한개의 레코드의 여러개의 오른쪽 레코드가 일치할 경우 해당 왼쪽 레코드를 여러 번 표시합니다. 왼쪽은 무조건 표시하며 매치되는 레코드가 없다면 NULL을 표시합니다.

> Right Join <br>
오른쪽 테이블을 기준으로 왼쪽 테이블을 매치시킵니다 <br>
오른쪽 테이블의 한개의 레코드의 여러개의 왼쪽 레코드가 일치할 경우 해당 오른쪽 레코드를 여러번 표시합니다. 오른쪽은 무조건 표시하며 매치되는 레코드가 없다면 NULL을 표시합니다.

