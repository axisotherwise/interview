# 데이터베이스
<br>

### 데이터베이스
일정한 규칙을 통해 구조화되어 저장되는 데이터 모음입니다. <br>
DBMS란 데이터베이스를 제어하고 관리하는 시스템을 의미합니다. <br>

<br>

### 데이터베이스 특징
1. 실시간 접근성 <br>
비정형적인 질의에 실시간 처리에 의한 응답이 가능해야 합니다. <br>

<br>

2. 지속적인 변화 <br>
데이터베이스는 동적입니다. <br>
새로운 데이터의 삽입 삭제 갱신으로 최신 데이터를 유지해야 합니다. <br>

<br>

3. 동시 공용 <br>
데이터베이스는 서로 다른 목적을 가진 응용자들이 사용합니다. <br>
다수의 사용자가 동시에 동일한 내용의 데이터를 이용할 수 있어야 합니다. <br>

<br>

4. 내용에 의한 참조 <br>
데이터 참조 시 레코드의 주소나 위치가 아닌 사용자가 정의하는 데이터의 내용으로 찾아져야 합니다. <br>

<br>

### 데이터베이스 무결성
1. 개체 무결성 <br>
기본 키는 중복되지 않으며 NULL 값을 허용하지 않습니다. <br>

<br>

2. 참조 무결성 <br>
외래 키는 기본 키에 종속되어야 하며 NULL 값을 허용하지 않습니다. <br>

<br>

3. 도메인 무결성 <br>
특정 속성에 대해 고유한 값을 가지도록 조건이 주어진 경우 그 속성 값은 모두 고유해야 합니다. <br>

<br>

### 데이터베이스 이상 현상
올바르지 않은 테이블 설계로 인해 발생하는 논리적 오류를 의미합니다. <br>

1. 삽입 이상 <br>
데이터 삽입 시 속성에 해당하는 값이 없어 NULL을 입력하는 현상 <br>

<br>

2. 갱신 이상 <br>
중복된 데이터 중 일부만 수정되어 데이터 모순이 일어나는 현상 <br>

<br>

3. 삭제 이상 <br>
데이터 삭제 시 의도하지 않은 데이터까지 삭제되는 현상 <br>

### 관게형 비관계형
1. 관계형 데이터베이스 <br>
스키마를 가지며 행과 열로 이루어진 데이터베이스를 의미합니다. <br>

* 장점 구조화된 데이터를 관리하므로 데이터의 정합성을 보장할 수 있습니다. <br>
* 단점 시스템이 커질수록 쿼리가 복잡해지고 성능 저하가 발생할 수 있습니다. <br>

<br>

2. 비관계형 데이터베이스 <br>
스키마가 없으며 데이터는 Key-Value 형태로 저장됩니다. <br>

* 장점 스키마가 없어 데이터의 조회 삽입 성능이 뛰어납니다. <br>
* 단점 명확한 데이터 구조를 보장하지 않아 데이터 구조 결정에 어려움이 있습니다. <br>

<br>

* 데이터 간 관계가 복잡하거나 무결성이 중요해 ACID 성질을 준수해야 한다면 관계형 데이터베이스가 적합합니다. <br>
* 데이터 변경에 유연해야 하고 양이 많다면 비관계형 데이터베이스가 적합합니다. <br>

<br>

### 옵티마이저
쿼리 실행 계획을 수립하는 내부 핵심 엔진입니다. <br>

* 쿼리 실행 단계 <br>
1. 파스 트리 <br>
쿼리 문을 파싱 해 내부 엔진이 이해할 수 있는 파스 트리를 생성합니다. <br>

<br>

2. 파스 트리 참조 <br>
생성된 파스 트리를 참조해 실행 계획을 수립합니다. <br>

<br>

3. 스토리지 엔진 <br>
수립된 실행 계획에 따라 레코드를 읽어 작업을 수행합니다. <br>

* 최적화 로직은 규칙 기반과 비용 기반 최적화로 나뉩니다. <br>
* 규칙 기반 최적화란 옵티마이저 내부에 내장된 순서에 따라 실행 계획을 수립함을 의미합니다. <br>
* 비용 기반 최적화란 쿼리 문 처리를 위해 여러 방법을 만들어 각 실행 계획의 비용을 산출함을 의미합니다. <br>

<br>

### SQL 언어
1. DDL (Database Definition Language) <br>
데이터베이스의 구조를 정의합니다. (Create, Alter, Drop, Truncate) <br>

<br>

2. DML (Database Manipulation Language) <br>
데이터베이스의 데이터를 조작합니다. (Select, Insert, Update, Delete) <br>

<br>

3. DCL (Database Controller Language) <br>
데이터베이스 관리와 데이터의 무결성 유지를 위해 사용합니다. <br>
(Grant, Revoke)

<br>

### 정규화
이상 현상을 해결하고 불필요한 데이터를 제거하기 위해 릴레이션을 여러 개로 분리하는 과정을 의미합니다. <br>

> 정규형 원칙 <br>
> 하나의 릴레이션은 하나의 의미만 가져야 합니다. <br>
> 각각의 릴레이션은 독립적인 표현이 가능해야 합니다. <br>

* 제1정규형 <br>
릴레이션의 모든 도메인이 더 이상 분해될 수 없는 원자 값으로 구성합니다. <br>

* 제2정규형 <br>
제1정규형이며 함수적 종속성을 제거한 형태입니다. <br>

> 함수적 종속성 <br>
> 어떤 속성 A의 값을 알면 다른 B의 속성의 값이 유일하게 정해지는 관계를 B는 A의 종속함을 의미합니다. <br>

<br>

### 비정규화
하나 이상의 테이블에 데이터를 중복으로 배치하는 과정을 의미합니다. <br>

* 읽기 작업의 성능이 저하되었을 경우 사용합니다. <br>
* 과도한 비정규화는 데이터베이스의 무결성을 해칩니다. <br>

### ORM
객체와 데이터베이스의 릴레이션을 매핑해주는 도구입니다. <br>
데이터베이스의 접근을 프로그래밍 언어 관점에서 바라볼 수 있습니다. <br>

* 장점 <br>
데이터베이스 변경되었을 경우 변경된 문법을 ORM이 커버합니다. <br>
ORM은 독립적으로 작성되어 있으며 해당 객체들을 재활용할 수 있습니다. <br>
로우 쿼리의 절차적이고 순차적인 접근이 아닌 객체 지향 접근을 통해 생산성이 증가합니다. <br>

* 단점 <br>
프로젝트의 규모가 커질 시 난이도가 급격하게 올라갑니다. <br>
설계가 제대로 되지 않은 경우 성능 저하와 일관성이 무너질 수 있습니다. <br>

<br>

### SQL Injection
악의적인 쿼리를 삽입해 데이터베이스를 비정상적으로 조작하는 코드 인젝션 공격 기법입니다. <br>

* 사용자의 입력값이 쿼리 문의 동적으로 영향을 주는 경우 개발자가 의도한 값인지 검증해야 합니다. <br>
* 저장 프로시저를 활용해 쿼리의 형식을 지정해 지정한 형식이 아닐 경우 쿼리가 실행되지 않도록 설정합니다. <br>

> PrepareStatement

<br>

### 인덱스
테이블의 검색과 정렬 작업의 속도를 향상시킬 수 있는 장치입니다. <br>

> 데이터 삽입 삭제 갱신등이 아닌 조회 작업의 빈도가 높을 경우 적합합니다. <br>
> 데이터 양이 많고 NULL 값이 적을 경우 적합합니다. <br>
> 카디널리티가 높을 경우 적합합니다. <br>
> 인덱스 트리를 따라가는 비용이 증가해 오버헤드가 발생할 수 있습니다. <br>

<br>

### 조인
테이블을 결합하는 연산 작업입니다.

<br>

1. 이너 조인
테이블 간 공통된 컬럼을 이용해 조건에 맞는 레코드를 출력합니다. <br>

<br>

2. 아우터 조인
기준 테이블에 레코드가 모두 출력되며 조건에 맞지 않을 경우 반대 테이블에 레코드는 NULL 값이 출력됩니다. <br>

<br>

### 조인 원리
1. 중첩 루프 조인 (Nested Loop Join) <br>
반복 문과 같은 원리로 조건에 맞는 조인을 수행합니다. <br>
랜덤 접근에 대한 비용이 증가하므로 대용량의 테이블에 사용하지 않습니다. <br>

<br>

2. 정렬 병합 (Sort Merge Join) <br>
각각의 테이블을 조인할 필드를 기준으로 정렬하고 정렬이 끝난 후 조인을 수행합니다. <br>
대용량의 테이블이나 적절한 인덱스가 없을 경우 사용합니다. <br>

<br>

3. 해시 조인 (Hash Join) <br>
해시 테이블을 사용하여 두 입력 간에 일치하는 행을 찾아 조인하는 방법입니다. <br>

> 빌드 단계와 프로브 단계가 존재합니다. <br>





